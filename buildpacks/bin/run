$:.unshift(File.expand_path("../../lib", __FILE__))

WINDOWS = RbConfig::CONFIG['host_os'] =~ /mswin|mingw/

require 'buildpack'

if WINDOWS
  require 'win_buildpack'
end

unless ARGV.length == 1
  puts "Usage: run_plugin [plugin config file]"
  exit 1
end

if WINDOWS
  Buildpacks::WinBuildpack.from_file(ARGV[0]).stage_application
else
  Buildpacks::Buildpack.from_file(ARGV[0]).stage_application
end
